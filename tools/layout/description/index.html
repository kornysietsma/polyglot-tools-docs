<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.26.1"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Polyglot Code Offline Layout | polyglot-tools-docs</title><meta data-react-helmet="true" name="description" content="Korny&#x27;s polyglot tool documentation site - WIP"/><meta data-react-helmet="true" name="image" content="https://polyglot.korny.info/banner.png"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="IE=edge,chrome=1"/><meta data-react-helmet="true" name="MobileOptimized" content="320"/><meta data-react-helmet="true" name="HandheldFriendly" content="True"/><meta data-react-helmet="true" name="google" content="notranslate"/><meta data-react-helmet="true" name="referrer" content="no-referrer-when-downgrade"/><meta data-react-helmet="true" property="og:url" content="https://polyglot.korny.info/tools/layout/description/"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Polyglot Code Offline Layout | polyglot-tools-docs"/><meta data-react-helmet="true" property="og:description" content="Korny&#x27;s polyglot tool documentation site - WIP"/><meta data-react-helmet="true" property="og:locale" content="en"/><meta data-react-helmet="true" property="og:site_name" content="polyglot-tools-docs"/><meta data-react-helmet="true" property="og:image" content="https://polyglot.korny.info/banner.png"/><meta data-react-helmet="true" property="og:image:secure_url" content="https://polyglot.korny.info/banner.png"/><meta data-react-helmet="true" property="og:image:alt" content="Banner"/><meta data-react-helmet="true" property="og:image:type" content="image/png"/><meta data-react-helmet="true" property="og:image:width" content="1200"/><meta data-react-helmet="true" property="og:image:height" content="630"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Polyglot Code Offline Layout | polyglot-tools-docs"/><meta data-react-helmet="true" name="twitter:site" content="@kornys"/><meta data-react-helmet="true" name="twitter:creator" content="@kornys"/><meta data-react-helmet="true" name="twitter:image" content="https://polyglot.korny.info/banner.png"/><meta data-react-helmet="true" name="twitter:image:src" content="https://polyglot.korny.info/banner.png"/><meta data-react-helmet="true" name="twitter:image:alt" content="Banner"/><meta data-react-helmet="true" name="twitter:image:width" content="1200"/><meta data-react-helmet="true" name="twitter:image:height" content="630"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://polyglot.korny.info/tools/layout/description/","name":"Polyglot Code Offline Layout","alternateName":"polyglot-tools-docs"}]</script><link rel="icon" href="/favicon-32x32.png?v=2a8552b6bfc20e1efb49ebf44550500e" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=2a8552b6bfc20e1efb49ebf44550500e"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=2a8552b6bfc20e1efb49ebf44550500e"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=2a8552b6bfc20e1efb49ebf44550500e"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=2a8552b6bfc20e1efb49ebf44550500e"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=2a8552b6bfc20e1efb49ebf44550500e"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=2a8552b6bfc20e1efb49ebf44550500e"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=2a8552b6bfc20e1efb49ebf44550500e"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=2a8552b6bfc20e1efb49ebf44550500e"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="canonical" href="https://polyglot.korny.info/tools/layout/description/" data-baseprotocol="https:" data-basehost="polyglot.korny.info"/><link as="script" rel="preload" href="/webpack-runtime-9851419e2b6271182ead.js"/><link as="script" rel="preload" href="/framework-305b3707783ccc9d7ca6.js"/><link as="script" rel="preload" href="/f0e45107-02a22ac72de90821f3f0.js"/><link as="script" rel="preload" href="/app-5b9f999b118ab7ab1f56.js"/><link as="script" rel="preload" href="/545f34e4-fd6533567525999d763e.js"/><link as="script" rel="preload" href="/5e2a4920-a9a1a0777b8b3bf4672a.js"/><link as="script" rel="preload" href="/252f366e-3307f783f1a8f590aa23.js"/><link as="script" rel="preload" href="/a7629950cb7a18c7593baf47d0acfe798f1cddc4-98f61b28ca063a1b271d.js"/><link as="script" rel="preload" href="/component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js-e6a0cc08f5ccbfb93726.js"/><link as="fetch" rel="preload" href="/page-data/tools/layout/description/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1954253342.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2328931024.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2501019404.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/973074209.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><style data-emotion-css="3b0hn4">*,*::after,*::before{margin:0;padding:0;box-sizing:border-box;}body{font-size:16px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;background-color:#FFFFFF;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased;overflow-y:scroll;}h1{font-size:32px;color:#3D3D4D;font-weight:bold;margin-bottom:24px;}h2{font-size:24px;}h3{font-size:18px;}h4{font-size:16px;}h2,h3,h4,h5,h6{color:#3D3D4D;margin:24px 0 16px 0;font-weight:bold;}p{color:#6C6C80;font-size:16px;line-height:28px;margin-bottom:16px;font-weight:400;}code.inline-code{display:inline-block;vertical-align:middle;line-height:1;padding:0.2em;background-color:#44475a;color:rgba(248,248,242);font-size:14px;border-radius:3px;font-feature-settings:'clig' 0,'calt' 0;font-variant:no-common-ligatures no-discretionary-ligatures no-historical-ligatures no-contextual;}h1 code.inline-code,h2 code.inline-code{font-size:calc(100% - 5px);padding:4px;}a{color:#6C6C80;font-weight:bold;-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}blockquote{margin-bottom:16px;width:100%;}blockquote p{padding:1rem;border-radius:5px;background:#F2F2FA;color:#6C6C80;margin:0;}hr{border:0;height:0;border-top:1px solid rgba(0,0,0,0.1);border-bottom:1px solid rgba(255,255,255,0.3);}table{border-collapse:separate;border-spacing:0 4px;margin-top:-4px;margin-bottom:16px;width:100%;}table th,table td{margin:0;color:#6C6C80;background-color:#F2F2FA;border:solid 1px #F2F2FA;border-style:solid none;padding:12px;}table th:first-of-type,table td:first-of-type{border-left-style:solid;border-top-left-radius:5px;border-bottom-left-radius:5px;}table th:last-child,table td:last-child{border-right-style:solid;border-bottom-right-radius:5px;border-top-right-radius:5px;}table tr th{color:#3D3D4D;text-align:left;font-weight:bold;}iframe{margin-bottom:16px;}img{max-width:100%;}ul,ol{color:#6C6C80;padding-left:15px;margin-bottom:16px;}ul li,ol li{line-height:28px;}li ul,li ol{margin-bottom:0;}.gatsby-highlight{font-family:Hack,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;font-variant:no-common-ligatures no-discretionary-ligatures no-historical-ligatures no-contextual;position:relative;z-index:0;margin:0 0 16px 0;overflow:auto;}.gatsby-highlight .token{font-style:normal !important;}pre[class*='language-'] code{font-family:inherit;}pre[class*='language-']::before{background:#d9d7e0;border-radius:0 0 4px 4px;color:#232129;font-size:12px;font-family:inherit;-webkit-letter-spacing:0.075em;-moz-letter-spacing:0.075em;-ms-letter-spacing:0.075em;letter-spacing:0.075em;line-height:1;padding:0.25rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;top:0;}pre[class~='language-js']::before,pre[class~='language-javascript']::before{content:'js';background:#f7df1e;}pre[class~='language-jsx']::before{content:'jsx';background:#61dafb;}pre[class~='language-typescript']::before,pre[class~='language-ts']::before{content:'ts';background:#294e80;color:#fff;}pre[class~='language-tsx']::before{content:'tsx';background:#294e80;color:#fff;}pre[class~='language-graphql']::before{content:'GraphQL';background:#e10098;color:#fff;}pre[class~='language-html']::before{content:'html';background:#005a9c;color:#fff;}pre[class~='language-css']::before{content:'css';background:#ff9800;color:#fff;}pre[class~='language-mdx']::before{content:'mdx';background:#f9ac00;color:#fff;}pre[class~='language-shell']::before{content:'shell';}pre[class~='language-sh']::before{content:'sh';}pre[class~='language-bash']::before{content:'bash';}pre[class~='language-yaml']::before,pre[class~='language-yml']::before{content:'yaml';background:#ffa8df;}pre[class~='language-markdown']::before{content:'md';}pre[class~='language-json']::before,pre[class~='language-json5']::before{content:'json';background:linen;}pre[class~='language-diff']::before{content:'diff';background:#e6ffed;}pre[class~='language-text']::before{content:'text';background:#fff;}pre[class~='language-flow']::before{content:'flow';background:#e8bd36;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="7gspsd">.css-7gspsd::after{content:'';position:fixed;width:100%;height:100%;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.8);z-index:999;display:none;}</style><div aria-label="Close menu" class="css-7gspsd"></div><style data-emotion-css="1i3ij69">.css-1i3ij69{width:100%;max-width:1400px;margin:0 auto;padding:0 24px;display:grid;grid-template-columns:280px calc(100% - 320px);grid-auto-flow:row;grid-gap:40px;}@media (max-width:780px){.css-1i3ij69{padding:24px;grid-template-columns:100%;}}</style><div class="css-1i3ij69 eees1d50"><style data-emotion-css="efco39">.css-efco39{width:100%;overflow-y:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:-webkit-sticky;position:sticky;top:0;padding-top:36px;-webkit-transition:-webkit-transform 0.5s;-webkit-transition:transform 0.5s;transition:transform 0.5s;height:calc(100vh - 1px);}.css-efco39 nav{width:100%;padding-top:24px;-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;-webkit-flex:1;-ms-flex:1;flex:1;}@media (max-width:780px){.css-efco39{max-width:75%;min-width:auto;z-index:1001;position:fixed;top:0;bottom:0;left:0;padding-top:32px;background:#FFFFFF;-webkit-transform:translate3d( -100%,0,0 );-ms-transform:translate3d( -100%,0,0 );transform:translate3d( -100%,0,0 );}}</style><aside class="css-efco39 e1wh78ri0"><style data-emotion-css="2yrou">.css-2yrou{width:100%;}.css-2yrou a{width:100%;padding-left:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-2yrou e1wh78ri1"><a aria-label="Go to home page" href="/"><style data-emotion-css="17z3clk">.css-17z3clk{width:220px;height:48px;background-size:contain;background:url(/static/icon-48-d53d217db09d0372cc965607175fc4c8.png) left no-repeat;padding-left:52px;}</style><div class="css-17z3clk e3khjsp0"><style data-emotion-css="1bquxte">.css-1bquxte{color:black;line-height:48px;font-size:120%;text-align:center;}</style><p class="css-1bquxte e3khjsp1">Polyglot code tools</p></div></a></div><nav><style data-emotion-css="mbmci8">.css-mbmci8{list-style:none;width:100%;padding-left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><ul class="css-mbmci8 e1wh78ri2"><style data-emotion-css="1wldk6c">.css-1wldk6c{font-size:15px;width:100%;-webkit-transition:all 200ms ease-in-out;transition:all 200ms ease-in-out;padding:0 20px;cursor:pointer;}.css-1wldk6c a,.css-1wldk6c span{display:block;font-size:15px;color:#6C6C80;background-color:#FFFFFF;padding:4px 10px;margin:4px 0;border-radius:4px;font-weight:normal;-webkit-text-decoration:none;text-decoration:none;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;margin:0 auto;-webkit-transition:all 0.2s ease;transition:all 0.2s ease;}.css-1wldk6c a svg,.css-1wldk6c span svg{width:20px;height:20px;margin-right:10px;}.css-1wldk6c a:not(.active-link):hover,.css-1wldk6c span:not(.active-link):hover{color:#8257E6;}.css-1wldk6c a.active-link,.css-1wldk6c span.active-link{color:#8257E6;background-color:#F2F2FA;}@media (max-width:780px){.css-1wldk6c a.active-link,.css-1wldk6c span.active-link{background:#F2F2FA;}}</style><li class="css-1wldk6c e1wh78ri4"><a href="/">Introduction</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/overview">Overview</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/news">News</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/quick-start">Quick start guide</a></li><style data-emotion-css="mximbs">.css-mximbs{padding-left:30px;width:100%;text-transform:uppercase;font-size:14px;font-weight:bold;margin-top:20px;color:#3D3D4D;-webkit-letter-spacing:0.142em;-moz-letter-spacing:0.142em;-ms-letter-spacing:0.142em;letter-spacing:0.142em;}</style><li class="css-mximbs e1wh78ri3">Tools</li><style data-emotion-css="157nhwy">.css-157nhwy{list-style:none;width:100%;padding-left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:5px 0 0 0;}</style><ul class="css-157nhwy e1wh78ri5"><li class="css-1wldk6c e1wh78ri4"><a href="/tools/explorer/description">Polyglot Code Explorer</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/tools/explorer/ui">Explorer UI in detail</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/tools/scanner/description">Polyglot Code Scanner</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/tools/layout/description">Polyglot Code Offline Layout</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/tools/simple-code-server">Simple Code Server</a></li></ul><li class="css-1wldk6c e1wh78ri4"><a href="/metrics/overview">Metrics and Visualisations</a></li><li class="css-mximbs e1wh78ri3">How To guides</li><ul class="css-157nhwy e1wh78ri5"><li class="css-1wldk6c e1wh78ri4"><a href="/tools/explorer/howto">How to run the Explorer</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/tools/scanner/howto">How to run the Scanner</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/tools/layout/howto">How to run the Layout</a></li></ul><li class="css-mximbs e1wh78ri3">Other Information</li><ul class="css-157nhwy e1wh78ri5"><li class="css-1wldk6c e1wh78ri4"><a href="/tools/explorer/data-format">Data Format</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/bibliography">Bibliography</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/future-plans">Future plans</a></li><li class="css-1wldk6c e1wh78ri4"><a href="/faq">FAQ</a></li></ul></ul></nav></aside><style data-emotion-css="19vacph">.css-19vacph{height:100%;padding-top:36px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;position:relative;}@media (max-width:1200px){.css-19vacph{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media (max-width:780px){.css-19vacph{padding-top:0;}}</style><main class="css-19vacph eees1d51"><style data-emotion-css="9q3p0l">.css-9q3p0l{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px;margin-bottom:24px;}.css-9q3p0l h2{margin:0;border:none;padding:0;font-size:18px;}@media (max-width:359px){.css-9q3p0l h2{font-size:14px;}}.css-9q3p0l button{border:none;background:none;cursor:pointer;margin-right:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (min-width:780px){.css-9q3p0l{display:none;}}</style><header class="css-9q3p0l esnpb7p0"><button aria-label="Open sidebar" type="button"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" size="23" aria-hidden="true" height="23" width="23" xmlns="http://www.w3.org/2000/svg"><path d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"></path></svg></button><h2>polyglot-tools-docs</h2></header><style data-emotion-css="enx1eb">.css-enx1eb{display:none;}@media (max-width:1200px){.css-enx1eb{display:block;}}</style><h1 class="css-enx1eb">Polyglot Code Offline Layout</h1><style data-emotion-css="oprxly">.css-oprxly{width:100%;max-width:calc(75% - 64px);padding-right:64px;}@media (max-width:1200px){.css-oprxly{max-width:100%;padding-right:0;-webkit-order:3;-ms-flex-order:3;order:3;}}.css-oprxly h1,.css-oprxly h2,.css-oprxly h3,.css-oprxly h4,.css-oprxly h5,.css-oprxly h6{overflow-wrap:break-word;}</style><div class="css-oprxly eees1d52"><style data-emotion-css="1n3b8my">@media (max-width:1200px){.css-1n3b8my{display:none;}}</style><h1 class="css-1n3b8my">Polyglot Code Offline Layout</h1><p>The Offline Layout tool is a script to calculate the layouts used by the <a href="/tools/explorer/description">explorer</a> - it runs offline as the layout algorithms are too slow to run in a browser.  It uses a mixture of weighted Voronoi Treemap layouts and Circle Packing.</p><p>The source code is available at <a href="https://github.com/kornysietsma/polyglot-code-offline-layout">https://github.com/kornysietsma/polyglot-code-offline-layout</a></p><p>I use Franck LeBeau&#x27;s <a href="https://github.com/Kcnarf/d3-voronoi-treemap">d3-voronoi-treemap</a> library - or more specifically, it&#x27;s underlying <a href="https://github.com/Kcnarf/d3-voronoi-map">d3-voronoi-map</a> library - to do the Voronoi calculations.</p><h2 id="what-is-a-weighted-voronoi-treemap" style="position:relative"><a href="#what-is-a-weighted-voronoi-treemap" aria-label="what is a weighted voronoi treemap permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is a weighted voronoi treemap?</h2><p>A <a href="https://en.wikipedia.org/wiki/Treemapping">treemap</a> is generally a way of representing a hierarchy of data in a recursive way.  A weighted treemap is weighted so that each node has area proportional to it&#x27;s value - in our case, to the lines of code.</p><p>Traditional D3 treemaps are typically rectangular: <a href="https://observablehq.com/@d3/treemap">https://observablehq.com/@d3/treemap</a> - this is where I started out.  But rectangular maps get quite hard to understand visually - edges line up in ugly ways, and you can&#x27;t really see what is a parent and what is a child.</p><p>Instead, I&#x27;m using a layout based on <a href="https://en.wikipedia.org/wiki/Weighted_Voronoi_diagram">Weighted Voronoi Diagrams</a> - which also have the property that each area shown is proportional to the value, but are much more organic.</p><h2 id="how-is-this-a-tree" style="position:relative"><a href="#how-is-this-a-tree" aria-label="how is this a tree permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How is this a tree?</h2><p>The Voronoi layout algorithm is applied recursively for each directory and subdirectory in the codebase.  For example, when laying out the <a href="http://polyglot-code-explorer.s3-website.eu-west-2.amazonaws.com/">qgis codebase</a> the first level is laid out like this:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:600px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:98.75%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAADNUlEQVQ4y3WVW0iUQRTHJ7WytHvQ/f5Q0UO9dPNSabqmpmnlJVNQIiJ6UIKQICN6MJCI6MEybS+63pa1HjLaLLMkxTShTDMLszRIM2tBa72s+2/OrPP56erAOJ8zZ35zzpn/nGUOhwPUqY2Ojn/T+KmxF+Yb75F3sQGm603QX25EvaUL//qHIZt9ZFSxp84UmN2hGD0zfsa1xCqkbDVjJ8vGLnYbKVvMOL6sCFGLjUjaaEJuej0GrEMuUKaG2QaGceVYJXxZDgJYHk6uL0XUIiPC5xpwalsZji4tRPAMrVjby+4gkYNb639OgDIKk9qQbQSpvuXYw705NEsPjbsOQXwzQZM3m8X/B9k9aDx0COE91FOPfSwXYXMMaKntVqBMepeVUo3dHBbmaRCbJSB6iVGEKWHBblqxRmPobD32c2j86hJYe21OD+lPw5MusRAyU6fAaHMQ0yJuZbHwgrxV1sa6gHJPKfxb52rHgZciKkTeZKhkSLk6wHMVu2J6oDyYvD+ysAA9nf1gfT/+InJ+gZgkkBwPe+eLW6WbjpiX7xKyupMjPtyhx9o2sOZX3YhbVeyEeOUjhkNOrCkRcwSinCasK0WE9xjUfSKUviWQwmbVZR2I5wDyJJbni1ynXNJmyiF18oygkQsKXKASSCnLTKgCe2H6IqRBt0n6IsDksCifNJew1qnLQA4l6ajVoHHXIufCa7APdT1I3FAqJtVGag/kSBdD6SCB0+Ei33wumsuKhF+a9Q6s3zrIgSZhoAZOloccCUJSoqiSNpmEBlP9HuJ8wCNUmzucsrkaU6nIZqpbnApKELpA8pr2pfmXw/rL5gQ213SLvGg8dC63OJ2YY5YXiahIo/TCqCIJYdvtzkednVYnFkLHnt50UPEcec5IDeSZP7vLFVKmlDSmrn8ZkU8FlGQjX43yctyc8glU5ZBsSfxfW347iwN3jsnCKsebZ2tEFfHjJ8v8iM4LAR1E4NPb7+PMjgdID7HgW+ufieVLXa1le1PxHekaC8K9DBycIx6/D+/0TQ8gK/klLPq2Kas2U/8EODhUXbk7P1rxvLgdhZlvoc9oFJW8vakPQ4N2xUbaS85/V/jyNEiQ00cAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <picture>
        <source srcSet="/static/ab8818dc63ff473e15030d9b40350a36/8ac56/voronoi_1level.webp 240w,/static/ab8818dc63ff473e15030d9b40350a36/d3be9/voronoi_1level.webp 480w,/static/ab8818dc63ff473e15030d9b40350a36/e88ff/voronoi_1level.webp 600w" sizes="(max-width: 600px) 100vw, 600px" type="image/webp"/>
        <source srcSet="/static/ab8818dc63ff473e15030d9b40350a36/8ff5a/voronoi_1level.png 240w,/static/ab8818dc63ff473e15030d9b40350a36/e85cb/voronoi_1level.png 480w,/static/ab8818dc63ff473e15030d9b40350a36/0a47e/voronoi_1level.png 600w" sizes="(max-width: 600px) 100vw, 600px" type="image/png"/>
        <img class="gatsby-resp-image-image" src="/static/ab8818dc63ff473e15030d9b40350a36/0a47e/voronoi_1level.png" alt="layout depth 1" title="layout depth 1" loading="lazy" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
      </picture>
    </span></p><p>where each segment is one top-level directory like <code class="inline-code">/src</code> or <code class="inline-code">/test</code>, with a size roughly proportional to the total lines of code inside that directory.</p><p>Then each segment of this diagram is subdivided with another voronoi layout:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:610px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:100%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAADhUlEQVQ4y21VWU8TURQeRcUNN9wVl8SVxOiLW2LigzEm/gAffZMYF8BiEUpZCqEaUYm+aGJ8cKULUAotiCRGXBINRIuGiKLBukWRAqIgatvP+93pTKeRSaYzvfec73znfOeeUSCuaDQK7Rn5G4HxGu4fxafOAQSf96P/3U9EwlF9j7ZGX15KAljMeGTwN+5ceYWqjMcoW+6FPd2HszuaYUvzwnHgMVrPd2Hw07DqF4kmgCraCzd4td/sQfnqBmQnO1CSVocjyg0Uzq/FpT13cW7zbVjn1iInyYHCebV4dLFbB0pgqDG7f6ELh5TrOKrchElx4PgEJyo2NUmgio2NyJvuRrZyC6bxDmSJ50HlGurNzxKYKpGwWrNA9XtYRdRjShVyBJDmREYFs2uQP6MapnEO/SbLnCSnAL2K1souvaYy5YEPw8ifWQ1zsks6ZwtQAhLcItb5bhHr2hoBj8VsaEu/r6++qynzx5ffIekzasGcGuROdUlD3gx0YpobeSnVaiADS4Ien+iUvu6DbSpg+E8E9tU+tW6xiJZZKtvcKS4UL66TgLyNgBpTksgUvhUbm/Br6A+Uvrc/ULayXtaLm3kpbvlfAyIw/5N5VkwQIyjXaMes3reFoIR6fuDy3nuo3NYsC09hSld4JTgVJSsyta9p0IUikJYulS9ZUofDojteNn2G0v30G8p3iaZd6pUAGtOC1BpV8fEqsDnZCftan15TTX0yKxIkrKu86HzwBUqwexBZq9guIjJT0eooHMlMYyTFmuySTV+0wCPXaZcpnrZFdbBu9+N1R58QRfThyU2NsrCmpMSCF873SDa2ZV6cmOpWayjWyYwByLJooQeuQ09wZn8r+r+OqG1DySk9a2IysKQwBDu5zqevEZTMT29olKAMniey8RQF4n34+cWArJuWnnQStaHisqbi5JCN7EchAodE5VZVRGbG+2N7SAXUxlVLeafcsMxSjxmV006GeZITp9L96vETga2ptajc0qzbNOSq55kzQTFOCl9+QE4XGpIRJwqfbHQpSkwkmxDGvt4nA3nNT/X5GB9fkfjQ9Fs6ZGoZ4tATiMpqfVcqUmWPluxswuk9LfDbniM8GoYRIz5gDaDBtj5c3fcQp9b75ZHkSGM5isV8LN3dDE9xAL1vhuLMImMM2LE+AcOhUby934v2Gz0IuIIIPgsh1DsSBwpH//sE/AOu2lLZ6lhp4gAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <picture>
        <source srcSet="/static/c9064a49f45f6d8dea03638e05ef9e89/8ac56/voronoi_2level.webp 240w,/static/c9064a49f45f6d8dea03638e05ef9e89/d3be9/voronoi_2level.webp 480w,/static/c9064a49f45f6d8dea03638e05ef9e89/04445/voronoi_2level.webp 610w" sizes="(max-width: 610px) 100vw, 610px" type="image/webp"/>
        <source srcSet="/static/c9064a49f45f6d8dea03638e05ef9e89/8ff5a/voronoi_2level.png 240w,/static/c9064a49f45f6d8dea03638e05ef9e89/e85cb/voronoi_2level.png 480w,/static/c9064a49f45f6d8dea03638e05ef9e89/5aae9/voronoi_2level.png 610w" sizes="(max-width: 610px) 100vw, 610px" type="image/png"/>
        <img class="gatsby-resp-image-image" src="/static/c9064a49f45f6d8dea03638e05ef9e89/5aae9/voronoi_2level.png" alt="layout depth 2" title="layout depth 2" loading="lazy" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
      </picture>
    </span></p><p>Here each segment is a file or directory one layer deeper, such as <code class="inline-code">/src/core</code></p><p>This continues until all files are mapped (though you can set a limit in the UI, with the &#x27;display maximum depth&#x27; advanced option):</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:602px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:98.75%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAEvUlEQVQ4y3WV2VPTVxTH8z/0pS+dzvStj21f2+mLxdZO7ah1Q9wQLYKCbJZVBVFbN3BBFiUsgYBhSUgIJAQSQ4TsCYsIjmyirBFQQSGB5NMfogjT6Z35/c6d35z7+Z37PeeeK0IYgUCAjzbgX52vjLnJBaYfTTCi7cMlH2DumQff3CK+hTUXwd//aa3wiNZg60DTjz0oMizIjpl4rrLQl69Hsa+BocqHtCSZaM3Q87p7GP9y4D9Q0UZYgGdVDmx/lmEOL8eVrmaswcps3wAPL9lwnVHTfzWbKeV5XmRmMJmfi8/j2QD9EGGApWXovNGOJaQAc3ABHXGV2EPFdKRVU/WrGuVmKZPFBSxoMvE2ZeBtTmVechJPVgre8Yk1qOhjdN1FvRgOyLAG52PcnIU7XkZnSg32SCkFn4lp2lqIT5+OzxjKkvlnvIZIfA/TmS+L5OXd6/h9HyJ8L/7ILNYT1VjCyrBHlOE6VYEzSkrHX7L33+59IcUZewPcKfjsm/A7PmfJ9huLeiFSXRKzxenMml2fgE9z9HSG38Z57C42QTvznjzad+bhjpHSdqQS8Vf3eZx+nYA1Ga/tOMuOr/G1heBtOcdiczKvc6PxqJW8m1lC5Hu7RGeSDNfRO1gOFmHafA3jtgLs4aVY9xfQvKeawi8r6U26it+UyKJOgBriV63xDO9UibwpTGK8RMyUfRTRRNdLNAdUuFLVmE/I0e8qR7tdhjGkEmeCHMPRehp3KHAfuc58eZygoZAEfRq+Bys2ldd3IplTZDNaVoXH1INovGuGqqB6Hpw2Iv+pFt0+BcbIJjpiSrEnqui4oMV+zkB7lIKhhAxmc2J4ez+WOQE+k3WC8cxkJjQGRiQNTBsdiFy6Ue5sqcN8XI4qqAJXeCGGPVJaj6voOS+n66IGS3QdzWE6WoJr6Ym8ynDiWZ6lZDD4TyGDf4sFfWW0nlKjyXYicpqmuPljKb2xYqxRNbSHSjH8UUpTqI62CDm2o6U4k5SYT+to2FmPbq+cnsxqhrPKGBEreZErYeByBTe/V1KS7kY0/8qLKVErZFiM4aCcxgMtWOMFPcNWolTjvtCMPVXY9mklztOCpocEnx1y+q+U0HtJ0Dm6FEuajit7TZhqh1bLpjuvA+MxlbA1JY/OVeKKLqLtZD3W1Bah9OQ44mpwREhwJCgwhdeh2KKm52wu5v051H+TTdvWW5RvV+AZX1gFTnV6qPtdjSW+gUcJYroTijCe0uNIVtMWWYchXEvTbkHjX6poPiQkMEzJg8O1mHYXYtp0Gd23GTy9qV9/lqFfIjSFCOGExFZhimpCs1+L7DsJzrRGWmMNaHZU0RWTx0hBJU/OllC/rZ77P8hpDZZg3p3P4vT8RqDft4Q7W2hVKfl0pSuEBNWiP6TEnarCFidUwb57dP8lYehKMYMX87AczkcTVErnpSbeTb5aa4Eb2teyd4mxikb6r0npu9HIk9s6OgQNu6PzsYcVYouuoT9LS3GIipwgCe1nGpnvn1yFLfs3RvgRuvJ+1TfGcIVZ+LtQg6HFQge6hfukWEiQElm0juxdRuyy57yZX94AW+vY668A1s1nBmYZ0/YweK+VFzU2Rm2jdBrHWCm1/7sC/gUoIAIipdbrYQAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <picture>
        <source srcSet="/static/1c2e5457744594c9f05897664d468bca/8ac56/voronoi_9level.webp 240w,/static/1c2e5457744594c9f05897664d468bca/d3be9/voronoi_9level.webp 480w,/static/1c2e5457744594c9f05897664d468bca/ff4b8/voronoi_9level.webp 602w" sizes="(max-width: 602px) 100vw, 602px" type="image/webp"/>
        <source srcSet="/static/1c2e5457744594c9f05897664d468bca/8ff5a/voronoi_9level.png 240w,/static/1c2e5457744594c9f05897664d468bca/e85cb/voronoi_9level.png 480w,/static/1c2e5457744594c9f05897664d468bca/32056/voronoi_9level.png 602w" sizes="(max-width: 602px) 100vw, 602px" type="image/png"/>
        <img class="gatsby-resp-image-image" src="/static/1c2e5457744594c9f05897664d468bca/32056/voronoi_9level.png" alt="layout depth 9" title="layout depth 9" loading="lazy" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
      </picture>
    </span></p><h2 id="what-about-those-circles-on-some-diagrams" style="position:relative"><a href="#what-about-those-circles-on-some-diagrams" aria-label="what about those circles on some diagrams permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What about those circles on some diagrams?</h2><p>The layout tool has a command-line option <code class="inline-code">--circles</code> which uses <a href="https://observablehq.com/@d3/circle-packing">d3&#x27;s circle packing algorithm</a> for just the top layer of layout.</p><p>This is very useful for when you have multiple repositories - each repository (or each top-level directory at least) is shown as a circle, which makes the split between repositories clearer.</p><p>Circle packing still keeps areas proportional to &quot;size&quot; in terms of lines of code, as long as we only use the circle packing algorithm at the top level.</p><p>For example, the <a href="http://polyglot-code-explorer-openmrs.s3-website.eu-west-2.amazonaws.com/">openmrs codebase</a> is made up of many repositories - if you view just the top level circles, it looks like this:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:687px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:90.41666666666666%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAADoElEQVQ4y21UeVBNcRS+GMww/KEZSwxZB5UsyVha7EvRQosUaaqRLS+lxtAQQ02WrKVSROpJhRevqFCyJHsiWceUPVtmVO+9z/mdeptxZu679765v++c833nOxIo1CoNtPGprhFJOypRW/UFTX9UeF3TgPq3PyFPfIy8Y9X4+vE3DEOc1WhaLxGS9uHn9z98T4m9C0najPDFhYiRlcJncjYifArpvQBT+6ZC5n4RZco3uKJ4hWcPPxuBCyxJPNwqfgcH01TY9TqKuLDrWO9VALfRmRjTOQGeNnL4OeTCsv0hvgc7ncfyablYMimbr1dPG/DrR5O+QvGz1C4Hg6S9GC7tx7R+aYjfeAP2vY/CTNoD666JWDQ2C8OkfVzlWrcLnCwqoAj2fVL5rE23I9gSVKIHlLkrMYAOD5Hi4WyRgXDvAnhNOA273qnwGC/n9/VeSjgNPwkHAlk1XwF/qnJnyDW4WJ6CiRSDhWOy9ICf6huxfGouAmaeRWxoKeYNO4EzyVWouPoOIQsvIHplCf8nKg31UCKEqpw7NB1hlGSZfQ4CZp3l9u+X10NqaVYzcnZSFWXNw8QeyTBvdxAz+h/DGpd85tV9XBYmdD/Ch6ODSziph7UcjpREtugiJ3CzysTBqFutKqvVJDtdor2hxNW4LonE2X54T8wmZdP47ueQw4dXO+cj2PE8LCjpQOI9sK26t7XfjMeGRMca+rivtIs/Fqp604eChgObbxJHmQSm4IpDPZW6NoXyops3z7/pORThM+UMCxLhcwm2PVOwaoGCK5tkksztBc05h8ill5hH/+l5qL73kaiQ82Q8uv2BMVQtan2FsbIyLCZlBQ9x4WU8zJv8i1hRAbx1RQn8SDhn8wx+97XNwUyz43AdlYnP7xtbXUO0SYa2CXZUYDDxItoU2SN9C+FJvArSNywp4A52rruGySYpzN8y4jU9/r6uOl3LAlnEiydfUVlax8PrSqqFkWNGdzrMQLsjrrPKouo9keVYMDIDYTTognet7XTWMwQV0dKs4taEAEk77mCtaz47wqrjYXaMGPricy+REF2BjX6XWVCdlw1bFqDNTSp+vltWB18SymnESUQFFuvsN0I6wKr+G0ZeNixZW6lYWcLHwuOzB6Vj++qrsOxwCCMJMCWmsq0TdesMazTG28YQVAso7CgWhKkURzY7wU5I3FbB+/HfIv7LodHSbAOtefQFabvu8dA+uPkev9p2pnapGraqjb/D0yIF0q0UxAAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <picture>
        <source srcSet="/static/08194fae0d16aa57e5fe40058fe19afe/8ac56/circles_1level.webp 240w,/static/08194fae0d16aa57e5fe40058fe19afe/d3be9/circles_1level.webp 480w,/static/08194fae0d16aa57e5fe40058fe19afe/38668/circles_1level.webp 687w" sizes="(max-width: 687px) 100vw, 687px" type="image/webp"/>
        <source srcSet="/static/08194fae0d16aa57e5fe40058fe19afe/8ff5a/circles_1level.png 240w,/static/08194fae0d16aa57e5fe40058fe19afe/e85cb/circles_1level.png 480w,/static/08194fae0d16aa57e5fe40058fe19afe/aec65/circles_1level.png 687w" sizes="(max-width: 687px) 100vw, 687px" type="image/png"/>
        <img class="gatsby-resp-image-image" src="/static/08194fae0d16aa57e5fe40058fe19afe/aec65/circles_1level.png" alt="layout circles depth 1" title="layout circles depth 1" loading="lazy" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
      </picture>
    </span></p><p>Here each circle is a whole git repository.</p><p>Deeper layers are then laid out using the same Voronoi algorithm as above:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:697px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:92.08333333333334%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAADmUlEQVQ4y2VUa0yTZxj9vMw/m3H7Ydz8sYxdXEw0LjPzEiMOLyCi6GRD3RSUKAMBFURBBqiDIaBEMkUcq6MOQYWiCNpCpVyKXKYgERZjFpW4Sdh+yBxzYC9fz57nKS0UnqT9+r2X855znvNWcTgc4Bp6YZNn7q5bmKXkoDitE5qE20hcVY2zsW1I/8KEr+dexeXMe3jc9Qydpl5Yhpx7uByqE0fhry5zH7a/r0P0/EpoDt5GwgoDIuZVwH+SFinrjEhYacCmGReRtLoGhwNvIj3YhL2Lq/B9RDNUuwrrS7sTlMgJ4D6aXKoUwJs+sUuuozC5HX4TCmVsy1uXEDZLh2XKjzhJ7BMJnEGPhzbK+MHlBsR8Uomuxj4nQ0ZlWT6KRgD3LKxCNi1meUFvFCNlrRFpJPfYlnpsfbtU2H8bZMLh9TdxZk+rgPoqP0Gb3DEiuae7X5jxybwoYt5VdBifwlT8EKeimnFihxmhXmXERi/MDvlVu9cnrzEiOcCIU5EtsFlVKHabKsi6nG4c3ViLja9fwArlnHj43aY6hM+5It59Nu0CcsLMKIhvQ/4+J7Ooj68hN/wWNawOIe+Uou/RgFMy1+C/Vuz4QCdgAVPOYxXJiCZvvpx5SRhkflU/zLYRaZ+bZJ4P2e99g1ib8fI/6riDPRxu94u/LeKPD5m/nPwMfPXnYZb1wuKQbzX5W4ndxCo7pBFR868hg3zdObuc/G3w7DKz480MyOazlKxtDQh9twyh75VJClhmSUYn9i6qgjalHXdre+E/WSvvlkGbO4sCaLPYkRfdKiw0CXdwOfsesrY2kMQWAcsOacD51HaZj1lQiQOf6uVQZvdD3C9udsLQJZnrgI8em9+8KEHmuHB32aOTu5ooKrWIW3qDgDuw5hUtNkwtQsbmOtxv+Uv2qvZRN8XVGI5PT/czpFIcUumGcN544zf+NTiXeEcyylfy+HYzkvxqhLFB80D22unGuD0cDco10D+EEK9SknsdRUfuSog51NwsvgCnyYrHdHBueDPqSh65GTolD2uXQZLP4eRqq/qdslZOPl2RLgdPL8HqiYVYpOQjL6YVo2u0beMYuoLeUvFEGK1/rQjxy/QSXn4P+7AcPb/2w9lMVUh4NMXjJBpwLfjjwXNEflRBfwoFiPfW0303oLvpT1gtdg9WLiKupwegq1ygT397jiZdDwYHrPT7n5F5u2Oc7+Mkj5WuquMXi6wxEsfW/8Y7Uxs2EDwyAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <picture>
        <source srcSet="/static/b9c34a8053c5e2efae07278b6e82503e/8ac56/circles_2level.webp 240w,/static/b9c34a8053c5e2efae07278b6e82503e/d3be9/circles_2level.webp 480w,/static/b9c34a8053c5e2efae07278b6e82503e/458b7/circles_2level.webp 697w" sizes="(max-width: 697px) 100vw, 697px" type="image/webp"/>
        <source srcSet="/static/b9c34a8053c5e2efae07278b6e82503e/8ff5a/circles_2level.png 240w,/static/b9c34a8053c5e2efae07278b6e82503e/e85cb/circles_2level.png 480w,/static/b9c34a8053c5e2efae07278b6e82503e/7422e/circles_2level.png 697w" sizes="(max-width: 697px) 100vw, 697px" type="image/png"/>
        <img class="gatsby-resp-image-image" src="/static/b9c34a8053c5e2efae07278b6e82503e/7422e/circles_2level.png" alt="layout circles depth 2" title="layout circles depth 2" loading="lazy" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
      </picture>
    </span></p><p>And so on, until the final layout is:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:686px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:91.25000000000001%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAAD7ElEQVQ4y2WU60+aZxjG/Wv2aV+X7B/Y9mlZ0mWLS9b0kx+adIcm7WLTbl202lm1Vlm0YpkH1Gp1nATxgICA9YhQUXlVxANSBQRRQVAOv72ioGZ38r7P+z55nuu5r/u5r6sIMbKZLPlIho+JzHnJpNK5/1TijHgkRXhxj1jgmJuRJZvNXhuhKP+RTqZy40qVGtOn99lSOhEUAkezQwgqBy7JKO9/6sU7vEpyP0ZkI0788BI2m718RMDziWPvLtttQ3gb9XgkembvNDL/SxdTt+pYqtMgNKnwt8gI6dRELVq2VBbmX5nYM9hy2WXyDEXEouTxKWtNWvzdGtwPJLj/UuFqdzBfXMnUV2XM/FDHXMlrxj9/gv/fQba6xEPbR/F26diVyQiO9ZHYbCV16L2gnEqcsvRQyux31Sz8WIb7URM+9Qhrj17gLC5nvaaHg0ENHzv1mEqnsfw5RECrY0cxxna/haVqGQlnKdmQ/ALw/BU22Zm5LWH5cQf7ej17qgHSwU08Wgf6qg8YKm003xpGeW8CRekHgloFEX0P++p3JKbkJNxvCNhGOIuJlPP3ezBvx91jZbNZwVpFB5EhI45uGy0lg9R/Y+TbIjlDFTO4FOsEzFai6h58rX2s9Dmwt3kw/2xk3x25uuVkKMxKeTOeX5/hfS5l41Un4UE1yXE5ffdGefGFCUuDi4UGmwhgY/T7WlwlEly1o3g6LBxuRkmfZa4ASSfwS9sQnrYSkDYR6O1jpszMYr2RjjsTNHw9zvgDA6biHqwSK3c/6cb4WGTzu4yluy/PO/aqhqdHZ/jkAwT737JaJUdoUPJRMcDbL0eQfabH+tCEtcaOQ+bg/W8D7KrNHK5vs9MuY6dWwrHgIy+QHGA6FsfX0oFfaRHbwMqKykpoZJAN8Wa1t8cwVdiZ/Edgc3SB6PwE+8NiKYytBKV/E5B3ikipQoMXKKcyZ9j/eIdQLi4cMYr9piM+oWHttQLbExNzlVqE5/0czpo5VleQma5m8qkOz/Bubn8mnSGbo3wpmfNIeJY5cAr4ZL1EzAZRGSpO1NX4O5XsKY3stnUTtDk5MbWzP6Zj9qUN37hQoJvLsKDFa5I/WNvBWyMlpFSxN2ggalNzaNYRlIvK6GglNDzMsmIDT6OG2JTxhp4LlHMTmcylc0B0ckrsRQ1HFjWxORPCs07cZV0EG2vEGmov9pwmC6aST+qS8lV+F6Ai4EqIzUoJMV09SbcBd4OJpdJWFu5LCUys5r2gAFYwhxvuVsgSIgs+tlraODE0E542MCdxEJoQ6+cPcGEu2QLNG5T/B3i54NySYl4nycVx4oEwPqufdLqw8AbQ9fgPxrTft1YC1rQAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <picture>
        <source srcSet="/static/c0606ce84daa0bde3508bb6bd0c9cb00/8ac56/circles_nlevel.webp 240w,/static/c0606ce84daa0bde3508bb6bd0c9cb00/d3be9/circles_nlevel.webp 480w,/static/c0606ce84daa0bde3508bb6bd0c9cb00/7dbce/circles_nlevel.webp 686w" sizes="(max-width: 686px) 100vw, 686px" type="image/webp"/>
        <source srcSet="/static/c0606ce84daa0bde3508bb6bd0c9cb00/8ff5a/circles_nlevel.png 240w,/static/c0606ce84daa0bde3508bb6bd0c9cb00/e85cb/circles_nlevel.png 480w,/static/c0606ce84daa0bde3508bb6bd0c9cb00/f6386/circles_nlevel.png 686w" sizes="(max-width: 686px) 100vw, 686px" type="image/png"/>
        <img class="gatsby-resp-image-image" src="/static/c0606ce84daa0bde3508bb6bd0c9cb00/f6386/circles_nlevel.png" alt="layout circles depth N" title="layout circles depth N" loading="lazy" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
      </picture>
    </span></p><h2 id="why-is-this-run-offline" style="position:relative"><a href="#why-is-this-run-offline" aria-label="why is this run offline permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why is this run offline?</h2><p>There are two big problems with the libraries I am using:</p><ol><li>They are slow for big diagrams - sometimes quite painfully slow</li><li>They are not always successful - sometimes initial positions never get a good solution.</li></ol><h3 id="slowness" style="position:relative"><a href="#slowness" aria-label="slowness permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Slowness</h3><p>The slowness might be improved in some cases with a lot of code optimising.  But it might be somewhat inherent in the kind of layouts I&#x27;m using.  Some source code directories are huge - and the Voronoi algorithms are iterative, and sometimes they take a long time to get a good solution.</p><p>I&#x27;d love to build a carefully optimised implementation - possibly in rust using WebAssembly - but it would be a lot of work - and even then, it might not be fast enough, and you&#x27;d need a lot of JavaScript work to do the layouts incrementally without blocking the browser.</p><p>So as I don&#x27;t have time or brain space to do all this work, I decided to cheat.  I use Franck LeBeau&#x27;s code, but instead of running it in a browser, I run it offline using node.js, and save the resulting layout for use later in the browser.</p><h3 id="failures-and-bugs" style="position:relative"><a href="#failures-and-bugs" aria-label="failures and bugs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Failures and bugs</h3><p>The other problem is that the layout doesn&#x27;t always find a solution.  As of <a href="https://github.com/Kcnarf/d3-voronoi-map/releases/tag/v2.1.0">version 2.1.0</a> the main bugs that plagued me previously have been fixed - but still on occasion the layout throws a strange exception on encountering an edge case, or it just doesn&#x27;t find a good solution.  (The way the algorithm works is it defines starting positions for the algorithm randomly, and then iterates to find a solution - and sometimes those starting positions just don&#x27;t work well.)</p><p>So my layout application runs the Voronoi algorithm in a loop - every time I start the loop, it uses different random starting points, so I keep going until I get a good enough solution - or if I have looped too many times, I give up and just choose the best solution I&#x27;ve seen so far.</p><p>This of course is even slower!  In big codebases, recursively finding layouts can take over an hour.  So again, better to do this offline than to try to squeeze it into a browser.</p><h2 id="what-are-the-downsides" style="position:relative"><a href="#what-are-the-downsides" aria-label="what are the downsides permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What are the downsides?</h2><p>The biggest issue is that the layout can&#x27;t change in the UI.  You can&#x27;t exclude files and re-draw the layout, or go back in time and re-draw the layout - whatever you got from this tool, you are stuck with.  So you can&#x27;t (say) decide to exclude all XML files in the UI - if you decide you want to show source but not data, you need to re-run the initial scan <a href="/tools/scanner/howto#ignoring-files">with an ignore file</a> and then re-calculate the layout from scratch.</p><p>Also sometimes the result still isn&#x27;t quite accurate.  The layout doesn&#x27;t always converge to a perfect result.  It&#x27;s probably good enough for most purposes - but it&#x27;s not always quite right.  That&#x27;s why I still have a visualisation that highlights file size, so you don&#x27;t have to trust your eyes.</p><h2 id="have-you-considered-other-algorithms" style="position:relative"><a href="#have-you-considered-other-algorithms" aria-label="have you considered other algorithms permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Have you considered other algorithms?</h2><p>I tried rectangular treemaps first - I don&#x27;t like them much.</p><p>I&#x27;d love to try a <a href="https://blockbuilder.org/nitaku/8787855">Gosper treemap</a> just because I love fractals.  If I find the time.  It might also solve the speed problem - but it&#x27;s not as easy on the eyes for a deeply nested tree as the Voronoi layout, I tend to think.</p><style data-emotion-css="1vvt293">.css-1vvt293{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;margin-top:48px;color:#6C6C80;opacity:0.8;font-size:14px;font-weight:normal;}</style><a href="https://github.com/kornysietsma/polyglot-tools-docs/tree/master/src/docs/tools/layout/description.mdx" target="_blank" rel="noopener noreferrer" class="css-1vvt293"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" style="margin-right:5px" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg>Edit this page on GitHub</a><style data-emotion-css="1rfih1g">.css-1rfih1g{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:48px 0;width:100%;}@media (max-width:780px){.css-1rfih1g{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><section class="css-1rfih1g e1jikabl0"><style data-emotion-css="asqskg">.css-asqskg{-webkit-transition:all 200ms;transition:all 200ms;}.css-asqskg a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-text-decoration:none;text-decoration:none;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;}.css-asqskg a svg{width:25px;height:25px;color:#6C6C80;margin-right:16px;}.css-asqskg a p{-webkit-letter-spacing:0.142em;-moz-letter-spacing:0.142em;-ms-letter-spacing:0.142em;letter-spacing:0.142em;text-transform:uppercase;font-size:12px;margin:0;color:#6C6C80;}.css-asqskg a h3{color:#6C6C80;border:none;margin:0;padding:0;font-size:16px;}.css-asqskg:hover{opacity:0.8;}.css-asqskg:hover a svg{opacity:0.8;}@media (max-width:780px){.css-asqskg{width:100%;margin-bottom:16px;}.css-asqskg a{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}}</style><div class="css-asqskg e1jikabl1"><a href="/tools/scanner/description"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"></path></svg><div><p>Prev</p><h3>Polyglot Code Scanner</h3></div></a></div><style data-emotion-css="3wkrrt">.css-3wkrrt{-webkit-transition:all 200ms;transition:all 200ms;margin-left:auto;}.css-3wkrrt a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-text-decoration:none;text-decoration:none;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;}.css-3wkrrt a svg{width:25px;height:25px;color:#6C6C80;margin-left:16px;}.css-3wkrrt a p{-webkit-letter-spacing:0.142em;-moz-letter-spacing:0.142em;-ms-letter-spacing:0.142em;letter-spacing:0.142em;text-transform:uppercase;font-size:12px;margin:0;color:#6C6C80;}.css-3wkrrt a h3{color:#6C6C80;border:none;margin:0;padding:0;font-size:16px;}.css-3wkrrt:hover{opacity:0.8;}.css-3wkrrt:hover a svg{opacity:0.8;}@media (max-width:780px){.css-3wkrrt{width:100%;}.css-3wkrrt a{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}}</style><div class="css-3wkrrt e1jikabl1"><a href="/tools/simple-code-server"><div><p>Next</p><h3>Simple Code Server</h3></div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></a></div></section></div><style data-emotion-css="7dasph">.css-7dasph{position:-webkit-sticky;position:sticky;top:0;-webkit-order:2;-ms-flex-order:2;order:2;padding-top:72px;max-height:calc(100vh - 72px);overflow-y:auto;overflow-x:hidden;width:100%;max-width:200px;}@media (max-width:1200px){.css-7dasph{position:relative;top:auto;-webkit-order:0;-ms-flex-order:0;order:0;max-width:100%;margin-left:0;padding-top:0;}}</style><div class="css-7dasph e10o0eax0"><style data-emotion-css="1hx1hrk">.css-1hx1hrk h2{text-transform:uppercase;font-size:14px;font-weight:bold;-webkit-letter-spacing:0.142em;-moz-letter-spacing:0.142em;-ms-letter-spacing:0.142em;letter-spacing:0.142em;margin-top:0rem;border:none;margin:0 0 16px 0;}.css-1hx1hrk nav ul{padding-left:0;margin-bottom:0;list-style:none;}.css-1hx1hrk nav ul li{margin-bottom:12px;line-height:1.1;}.css-1hx1hrk nav ul li a{font-size:14px;font-weight:400;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:all 0.2s;transition:all 0.2s;overflow-wrap:break-word;}.css-1hx1hrk nav ul li a:hover{-webkit-text-decoration:underline;text-decoration:underline;}@media (max-width:1200px){.css-1hx1hrk{margin:0 0 24px 0;padding-bottom:16px;border-bottom:1px solid rgba(120,117,122,0.2);}}</style><div class="css-1hx1hrk e10o0eax1"><h2>On this page</h2><nav><ul><li><a href="#what-is-a-weighted-voronoi-treemap" style="color:#6C6C80">What is a weighted voronoi treemap?</a></li><li><a href="#how-is-this-a-tree" style="color:#6C6C80">How is this a tree?</a></li><li><a href="#what-about-those-circles-on-some-diagrams" style="color:#6C6C80">What about those circles on some diagrams?</a></li><li><a href="#why-is-this-run-offline" style="color:#6C6C80">Why is this run offline?</a></li><li style="margin-left:8px"><a href="#slowness" style="color:#6C6C80">Slowness</a></li><li style="margin-left:8px"><a href="#failures-and-bugs" style="color:#6C6C80">Failures and bugs</a></li><li><a href="#what-are-the-downsides" style="color:#6C6C80">What are the downsides?</a></li><li><a href="#have-you-considered-other-algorithms" style="color:#6C6C80">Have you considered other algorithms?</a></li></ul></nav></div></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-137924462-3', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/tools/layout/description/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-dfda8d059abd9d0298c4.js"],"app":["/app-5b9f999b118ab7ab1f56.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-241020a1cf7d0f317bbe.js"],"component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js":["/component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js-e6a0cc08f5ccbfb93726.js"],"component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-homepage-query-js":["/component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-homepage-query-js-aa4148c84510e7b01265.js"],"component---src-pages-404-js":["/component---src-pages-404-js-587ddd94f1ae754b631c.js"]};/*]]>*/</script><script src="/polyfill-dfda8d059abd9d0298c4.js" nomodule=""></script><script src="/component---node-modules-rocketseat-gatsby-theme-docs-core-src-templates-docs-query-js-e6a0cc08f5ccbfb93726.js" async=""></script><script src="/a7629950cb7a18c7593baf47d0acfe798f1cddc4-98f61b28ca063a1b271d.js" async=""></script><script src="/252f366e-3307f783f1a8f590aa23.js" async=""></script><script src="/5e2a4920-a9a1a0777b8b3bf4672a.js" async=""></script><script src="/545f34e4-fd6533567525999d763e.js" async=""></script><script src="/app-5b9f999b118ab7ab1f56.js" async=""></script><script src="/f0e45107-02a22ac72de90821f3f0.js" async=""></script><script src="/framework-305b3707783ccc9d7ca6.js" async=""></script><script src="/webpack-runtime-9851419e2b6271182ead.js" async=""></script></body></html>